helmDefaults:
  historyMax: 3
  createNamespace: true
  cleanupOnFail: true
  
helmfiles:
  - path: website.yaml
    values:
      - app:
          name: '{{ requiredEnv "APP_NAME" }}'
          component: website
          domain: '{{ requiredEnv "DOMAIN" }}'
        image:
          registry: '{{ requiredEnv "DOCKER_REGISTRY" }}/{{ requiredEnv "APP_NAME" }}'
        
  - path: cms.yaml
    values:
      - app:
          name: '{{ requiredEnv "APP_NAME" }}'
          component: cms
        database:
          username: '{{ env "DATABASE_USERNAME" | default "cms" }}'
          password: '{{ env "DATABASE_PASSWORD" | default "password" }}'
        image:
          registry: '{{ requiredEnv "DOCKER_REGISTRY" }}/{{ requiredEnv "APP_NAME" }}'
         
environments:
  default:
    values:
      - database:
          enabled: false
        tlsIssuer:
          enabled: false
        website:
          name: website
        cms:
          name: cms
  staging:
    values:
      - database:
          enabled: false
        tlsIssuer:
          enabled: true
        website:
          name: website
        cms:
          name: cms
  production:
    values:
      - database:
          enabled: true
        tlsIssuer:
          enabled: true
        website:
          name: website
        cms:
          name: cms
